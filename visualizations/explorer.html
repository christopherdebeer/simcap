<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMCAP Unified Explorer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #eee;
            min-height: 100vh;
        }
        
        .container { max-width: 1800px; margin: 0 auto; padding: 20px; }
        
        header {
            padding: 25px 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        h1 { font-size: 2em; margin-bottom: 8px; }
        .subtitle { opacity: 0.9; font-size: 1.1em; }
        
        .stats {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stat-box {
            background: rgba(255,255,255,0.15);
            padding: 12px 20px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .stat-box .number { font-size: 1.8em; font-weight: bold; display: block; }
        .stat-box .label { font-size: 0.85em; opacity: 0.8; }
        
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background: #16213e;
            padding: 8px;
            border-radius: 10px;
        }
        
        .tab {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: #aaa;
            cursor: pointer;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.2s;
        }
        
        .tab:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .tab.active { background: #667eea; color: #fff; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
        }
        
        .sidebar {
            background: #16213e;
            border-radius: 12px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .cluster-canvas-container {
            background: #0f0f23;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        #clusterCanvas {
            width: 100%;
            height: 280px;
            border-radius: 8px;
            cursor: crosshair;
        }
        
        .cluster-legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 15px;
        }
        
        .cluster-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
        }
        
        .cluster-item:hover { background: rgba(255,255,255,0.1); }
        .cluster-item.selected { background: rgba(102, 126, 234, 0.3); border: 1px solid #667eea; }
        
        .cluster-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .cluster-count { margin-left: auto; opacity: 0.6; font-size: 0.85em; }
        
        .content-area {
            background: #16213e;
            border-radius: 12px;
            padding: 20px;
        }
        
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-bar input, .filter-bar select {
            padding: 10px 15px;
            border: 2px solid #2a2a4a;
            border-radius: 8px;
            background: #0f0f23;
            color: #eee;
            font-size: 1em;
        }
        
        .filter-bar input:focus, .filter-bar select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .session-grid {
            display: grid;
            gap: 15px;
        }
        
        .session-card {
            background: #0f0f23;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .session-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .session-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        .session-title { font-weight: bold; font-size: 1.1em; }
        .session-info { font-size: 0.85em; opacity: 0.9; margin-top: 4px; }
        
        .session-badges {
            display: flex;
            gap: 6px;
        }
        
        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
        }
        
        .badge.labeled { background: #4daf4a; }
        .badge.unlabeled { background: #ff7f00; }
        
        .expand-icon {
            font-size: 1.3em;
            transition: transform 0.3s;
        }
        
        .session-card.expanded .expand-icon { transform: rotate(180deg); }
        
        .session-content {
            display: none;
            padding: 20px;
        }
        
        .session-card.expanded .session-content { display: block; }
        
        .section-title {
            font-size: 1.1em;
            color: #667eea;
            margin: 20px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #667eea;
        }
        
        .section-title:first-child { margin-top: 0; }
        
        .composite-image {
            width: 100%;
            max-height: 800px;
            object-fit: contain;
            background: #0a0a1a;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .windows-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .window-card {
            background: #1a1a2e;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }
        
        .window-card:hover {
            transform: scale(1.03);
        }
        
        .window-card.highlighted {
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.5);
        }
        
        .window-cluster-bar {
            height: 6px;
        }
        
        .window-preview {
            width: 100%;
            object-fit: contain;
            aspect-ratio: 4/3;
            background: #0a0a1a;
        }
        
        .window-info {
            padding: 10px;
        }
        
        .window-title { font-weight: bold; font-size: 0.9em; }
        .window-time { font-size: 0.8em; opacity: 0.7; margin-top: 3px; }
        .window-cluster { font-size: 0.75em; margin-top: 5px; }
        
        .raw-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 15px;
        }

        .raw-image {
            width: 100%;
            max-height: 500px;
            object-fit: contain;
            background: #0a0a1a;
            border-radius: 8px;
            cursor: pointer;
        }
        
        /* Labeling Panel */
        .labeling-panel {
            background: #0f0f23;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .labeling-title {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .gesture-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .gesture-btn {
            padding: 10px;
            border: 2px solid #2a2a4a;
            border-radius: 8px;
            background: transparent;
            color: #eee;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.2s;
        }
        
        .gesture-btn:hover { border-color: #667eea; background: rgba(102, 126, 234, 0.1); }
        .gesture-btn.selected { border-color: #667eea; background: #667eea; }
        
        .export-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .export-btn:hover { transform: scale(1.02); }
        .export-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            cursor: pointer;
        }
        
        .modal-close:hover { color: #667eea; }
        
        /* Metrics display */
        .metrics-box {
            background: #0f0f23;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #2a2a4a;
        }
        
        .metric-row:last-child { border-bottom: none; }
        .metric-label { opacity: 0.7; }
        .metric-value { font-weight: bold; }
        
        /* Filter bar extras */
        .divider {
            width: 1px;
            height: 30px;
            background: #2a2a4a;
            margin: 0 5px;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-size: 0.9em;
            color: #aaa;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #667eea;
        }
        
        .action-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: transparent;
            color: #667eea;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
        }
        
        .action-btn:hover {
            background: #667eea;
            color: #fff;
        }
        
        .section-hidden { display: none !important; }
        
        /* Cluster stats grid */
        .cluster-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .cluster-stat-card {
            background: #0f0f23;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .cluster-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .cluster-stat-card.selected {
            box-shadow: 0 0 0 2px #667eea;
        }
        
        .cluster-stat-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .cluster-stat-title {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .cluster-stat-size {
            margin-left: auto;
            background: rgba(255,255,255,0.1);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
        }
        
        .cluster-stat-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .cluster-stat-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }
        
        .cluster-stat-sessions {
            font-size: 0.85em;
            opacity: 0.7;
            margin-top: 8px;
        }
        
        .cluster-detail-card {
            background: #0f0f23;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }
        
        .cluster-detail-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .cluster-detail-title {
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .cluster-detail-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .cluster-detail-stat {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .cluster-detail-stat-value {
            font-size: 1.3em;
            font-weight: bold;
            display: block;
        }
        
        .cluster-detail-stat-label {
            font-size: 0.8em;
            opacity: 0.7;
        }
        
        .cluster-sessions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .cluster-session-tag {
            background: rgba(255,255,255,0.1);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .cluster-session-tag:hover {
            background: rgba(102, 126, 234, 0.3);
        }
        
        .cluster-windows-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .cluster-window-thumb {
            aspect-ratio: 4/3;
            background: #1a1a2e;
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cluster-window-thumb img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .main-layout { grid-template-columns: 1fr; }
            .sidebar { position: static; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ SIMCAP Unified Explorer</h1>
            <p class="subtitle">Interactive viewer for sensor data, clustering, and gesture labeling</p>
            <div class="stats">
                <div class="stat-box">
                    <span class="number" id="stat-sessions">24</span>
                    <span class="label">Sessions</span>
                </div>
                <div class="stat-box">
                    <span class="number" id="stat-windows">67</span>
                    <span class="label">Windows</span>
                </div>
                <div class="stat-box">
                    <span class="number" id="stat-clusters">10</span>
                    <span class="label">Clusters</span>
                </div>
                <div class="stat-box">
                    <span class="number" id="stat-labeled">0</span>
                    <span class="label">Labeled</span>
                </div>
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="explore">üìä Explore</button>
            <button class="tab" data-tab="clusters">üé® Clusters</button>
            <button class="tab" data-tab="label">üè∑Ô∏è Label</button>
        </div>
        
        <div class="tab-content active" id="tab-explore">
            <div class="main-layout">
                <div class="sidebar">
                    <div class="cluster-canvas-container">
                        <canvas id="clusterCanvas"></canvas>
                    </div>
                    
                    <div class="metrics-box">
                        <div class="metric-row">
                            <span class="metric-label">Silhouette Score</span>
                            <span class="metric-value">0.388</span>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Davies-Bouldin</span>
                            <span class="metric-value">0.987</span>
                        </div>
                    </div>
                    
                    <h3 style="margin-bottom: 10px; font-size: 1em;">Clusters</h3>
                    <div class="cluster-legend" id="clusterLegend"></div>
                </div>
                
                <div class="content-area">
                    <div class="filter-bar">
                        <input type="text" id="searchBox" placeholder="Search sessions..." style="flex: 1; min-width: 200px;">
                        <select id="clusterFilter">
                            <option value="all">All Clusters</option>
                        </select>
                        <select id="sortSelect">
                            <option value="timestamp-desc">Newest First</option>
                            <option value="timestamp-asc">Oldest First</option>
                            <option value="duration-desc">Longest First</option>
                            <option value="windows-desc">Most Windows</option>
                        </select>
                        <div class="divider"></div>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="showComposite" checked>
                                üìä Composite
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showWindows" checked>
                                üîç Windows
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="showRaw" checked>
                                üìê Raw
                            </label>
                        </div>
                        <div class="divider"></div>
                        <button class="action-btn" onclick="expandAll()">Expand All</button>
                        <button class="action-btn" onclick="collapseAll()">Collapse All</button>
                    </div>
                    
                    <div class="session-grid" id="sessionGrid"></div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="tab-clusters">
            <div class="content-area">
                <h2 style="margin-bottom: 20px;">Cluster Analysis</h2>
                <p style="margin-bottom: 20px; opacity: 0.8;">
                    Click on a cluster to filter sessions in the Explore tab.
                    Each cluster represents a group of similar sensor patterns discovered by K-means clustering.
                </p>
                
                <div class="cluster-stats-grid" id="clusterStatsGrid"></div>
                
                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #667eea;">Cluster Details</h3>
                <div id="clusterDetails"></div>
            </div>
        </div>
        
        <div class="tab-content" id="tab-label">
            <div class="content-area">
                <h2 style="margin-bottom: 20px;">Labeling Workflow</h2>
                <p style="margin-bottom: 20px; opacity: 0.8;">
                    Assign gesture names to clusters, then export label files.
                </p>
                
                <div class="labeling-panel">
                    <h3 class="labeling-title">Assign Gestures to Clusters</h3>
                    <div id="clusterLabeling"></div>
                    
                    <button class="export-btn" id="exportBtn" style="margin-top: 20px;">
                        üì• Export Label Templates
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="imageModal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>
    
    <script>
        // Embedded data
        const explorerData = {
  "generated_at": "2025-12-08T12:43:38.711673",
  "summary": {
    "total_sessions": 24,
    "labeled_sessions": 0,
    "unlabeled_sessions": 24,
    "total_samples": 4188,
    "gesture_counts": {
      "REST": 0,
      "FIST": 0,
      "OPEN_PALM": 0,
      "INDEX_UP": 0,
      "PEACE": 0,
      "THUMBS_UP": 0,
      "OK_SIGN": 0,
      "PINCH": 0,
      "GRAB": 0,
      "WAVE": 0
    },
    "stats": {
      "mean": [
        -1106.3082275390625,
        -3629.05224609375,
        -2285.70947265625,
        2740.3388671875,
        -14231.4755859375,
        -19574.75,
        509.62225341796875,
        909.9419555664062,
        -558.85986328125
      ],
      "std": [
        3468.3056640625,
        5655.27685546875,
        4552.767578125,
        1781.28369140625,
        3627.349609375,
        1845.618896484375,
        380.1090393066406,
        318.7688293457031,
        409.5138854980469
      ]
    }
  },
  "sessions": [
    {
      "filename": "2023-11-24T17:14:18.479Z.json",
      "timestamp": "2023-11-24T17:14:18.479Z",
      "duration": 2.86,
      "composite_image": "composite_2023-11-24T17:14:18.479Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:14:18.479Z.png",
        "orientation_3d_2023-11-24T17:14:18.479Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:14:18.479Z/window_001.png",
          "color": "#666962",
          "accel_mag_mean": 8283.09820819986,
          "gyro_mag_mean": 24894.621532672747,
          "cluster_id": 1
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:14:18.479Z/window_002.png",
          "color": "#656961",
          "accel_mag_mean": 8284.693033182684,
          "gyro_mag_mean": 25359.903990686125,
          "cluster_id": 1
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:24:38.129Z.json",
      "timestamp": "2023-11-24T17:24:38.129Z",
      "duration": 3.7,
      "composite_image": "composite_2023-11-24T17:24:38.129Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:24:38.129Z.png",
        "orientation_3d_2023-11-24T17:24:38.129Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:24:38.129Z/window_001.png",
          "color": "#676964",
          "accel_mag_mean": 8283.278417756432,
          "gyro_mag_mean": 23877.83174037251,
          "cluster_id": 1
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:24:38.129Z/window_002.png",
          "color": "#666963",
          "accel_mag_mean": 8282.883516048323,
          "gyro_mag_mean": 24767.043976842415,
          "cluster_id": 1
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:24:38.129Z/window_003.png",
          "color": "#666963",
          "accel_mag_mean": 8283.37256270002,
          "gyro_mag_mean": 24281.779610786605,
          "cluster_id": 1
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:27:20.364Z.json",
      "timestamp": "2023-11-24T17:27:20.364Z",
      "duration": 3.8,
      "composite_image": "composite_2023-11-24T17:27:20.364Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:27:20.364Z.png",
        "orientation_3d_2023-11-24T17:27:20.364Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:27:20.364Z/window_001.png",
          "color": "#6a6c66",
          "accel_mag_mean": 8530.252539317766,
          "gyro_mag_mean": 24290.290218788094,
          "cluster_id": 9
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:27:20.364Z/window_002.png",
          "color": "#676963",
          "accel_mag_mean": 8304.658385599907,
          "gyro_mag_mean": 24347.798056354237,
          "cluster_id": 1
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:27:20.364Z/window_003.png",
          "color": "#666864",
          "accel_mag_mean": 8166.915962533954,
          "gyro_mag_mean": 24105.34440844865,
          "cluster_id": 1
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:27:53.662Z.json",
      "timestamp": "2023-11-24T17:27:53.662Z",
      "duration": 3.76,
      "composite_image": "composite_2023-11-24T17:27:53.662Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:27:53.662Z.png",
        "orientation_3d_2023-11-24T17:27:53.662Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:27:53.662Z/window_001.png",
          "color": "#696b64",
          "accel_mag_mean": 8446.519026183974,
          "gyro_mag_mean": 24612.61976584827,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:27:53.662Z/window_002.png",
          "color": "#6a6d65",
          "accel_mag_mean": 8558.753498775714,
          "gyro_mag_mean": 24331.066564299446,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:27:53.662Z/window_003.png",
          "color": "#6b6e66",
          "accel_mag_mean": 8628.69384112648,
          "gyro_mag_mean": 24481.74188839633,
          "cluster_id": 3
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:28:29.121Z.json",
      "timestamp": "2023-11-24T17:28:29.121Z",
      "duration": 3.74,
      "composite_image": "composite_2023-11-24T17:28:29.121Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:28:29.121Z.png",
        "orientation_3d_2023-11-24T17:28:29.121Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:28:29.121Z/window_001.png",
          "color": "#6d7067",
          "accel_mag_mean": 8801.882367107628,
          "gyro_mag_mean": 24513.688627421838,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:28:29.121Z/window_002.png",
          "color": "#6c7069",
          "accel_mag_mean": 8801.645752545131,
          "gyro_mag_mean": 24723.88996737638,
          "cluster_id": 9
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:28:29.121Z/window_003.png",
          "color": "#6e7169",
          "accel_mag_mean": 8889.422812317887,
          "gyro_mag_mean": 24866.94911129745,
          "cluster_id": 3
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:29:02.123Z.json",
      "timestamp": "2023-11-24T17:29:02.123Z",
      "duration": 3.74,
      "composite_image": "composite_2023-11-24T17:29:02.123Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:29:02.123Z.png",
        "orientation_3d_2023-11-24T17:29:02.123Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:29:02.123Z/window_001.png",
          "color": "#6c6e67",
          "accel_mag_mean": 8674.721457804566,
          "gyro_mag_mean": 24243.74137649122,
          "cluster_id": 9
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:29:02.123Z/window_002.png",
          "color": "#6b6d65",
          "accel_mag_mean": 8607.385200692543,
          "gyro_mag_mean": 24765.78238643548,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:29:02.123Z/window_003.png",
          "color": "#6b6c67",
          "accel_mag_mean": 8519.893024198971,
          "gyro_mag_mean": 24464.962440951298,
          "cluster_id": 3
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:34:43.947Z.json",
      "timestamp": "2023-11-24T17:34:43.947Z",
      "duration": 3.74,
      "composite_image": "composite_2023-11-24T17:34:43.947Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:34:43.947Z.png",
        "orientation_3d_2023-11-24T17:34:43.947Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:34:43.947Z/window_001.png",
          "color": "#6b6d66",
          "accel_mag_mean": 8586.338403769438,
          "gyro_mag_mean": 24610.75780255299,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:34:43.947Z/window_002.png",
          "color": "#6f716a",
          "accel_mag_mean": 8912.256427145685,
          "gyro_mag_mean": 24931.648911493536,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:34:43.947Z/window_003.png",
          "color": "#6b6d65",
          "accel_mag_mean": 8616.089940252254,
          "gyro_mag_mean": 25269.11442385003,
          "cluster_id": 3
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:35:21.240Z.json",
      "timestamp": "2023-11-24T17:35:21.240Z",
      "duration": 3.74,
      "composite_image": "composite_2023-11-24T17:35:21.240Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:35:21.240Z.png",
        "orientation_3d_2023-11-24T17:35:21.240Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:35:21.240Z/window_001.png",
          "color": "#6d6e68",
          "accel_mag_mean": 8687.717711460627,
          "gyro_mag_mean": 24543.453375610192,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:35:21.240Z/window_002.png",
          "color": "#6e706a",
          "accel_mag_mean": 8833.907832356726,
          "gyro_mag_mean": 24606.095439650748,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:35:21.240Z/window_003.png",
          "color": "#74756e",
          "accel_mag_mean": 9232.089073646293,
          "gyro_mag_mean": 24643.80311289601,
          "cluster_id": 9
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:36:05.668Z.json",
      "timestamp": "2023-11-24T17:36:05.668Z",
      "duration": 3.76,
      "composite_image": "composite_2023-11-24T17:36:05.668Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:36:05.668Z.png",
        "orientation_3d_2023-11-24T17:36:05.668Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:36:05.668Z/window_001.png",
          "color": "#6c6d68",
          "accel_mag_mean": 8583.094287859332,
          "gyro_mag_mean": 24353.508045105093,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:36:05.668Z/window_002.png",
          "color": "#6e6f68",
          "accel_mag_mean": 8782.160148190997,
          "gyro_mag_mean": 25441.247690033622,
          "cluster_id": 9
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:36:05.668Z/window_003.png",
          "color": "#6c6e68",
          "accel_mag_mean": 8636.631481244944,
          "gyro_mag_mean": 24692.53046498003,
          "cluster_id": 9
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:36:42.659Z.json",
      "timestamp": "2023-11-24T17:36:42.659Z",
      "duration": 3.72,
      "composite_image": "composite_2023-11-24T17:36:42.659Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:36:42.659Z.png",
        "orientation_3d_2023-11-24T17:36:42.659Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:36:42.659Z/window_001.png",
          "color": "#696a64",
          "accel_mag_mean": 8369.042786490327,
          "gyro_mag_mean": 24538.783228612527,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:36:42.659Z/window_002.png",
          "color": "#6b6c66",
          "accel_mag_mean": 8521.331361062039,
          "gyro_mag_mean": 24543.432291961642,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:36:42.659Z/window_003.png",
          "color": "#6a6b66",
          "accel_mag_mean": 8467.71240717011,
          "gyro_mag_mean": 24415.361171547225,
          "cluster_id": 3
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:37:23.790Z.json",
      "timestamp": "2023-11-24T17:37:23.790Z",
      "duration": 3.76,
      "composite_image": "composite_2023-11-24T17:37:23.790Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:37:23.790Z.png",
        "orientation_3d_2023-11-24T17:37:23.790Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:37:23.790Z/window_001.png",
          "color": "#6c6e67",
          "accel_mag_mean": 8632.970852722787,
          "gyro_mag_mean": 24093.68772732629,
          "cluster_id": 3
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:37:23.790Z/window_002.png",
          "color": "#6c6e66",
          "accel_mag_mean": 8670.50603888938,
          "gyro_mag_mean": 24716.12139490601,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:37:23.790Z/window_003.png",
          "color": "#686a64",
          "accel_mag_mean": 8350.271405063286,
          "gyro_mag_mean": 24628.114110604063,
          "cluster_id": 9
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T17:44:59.523Z.json",
      "timestamp": "2023-11-24T17:44:59.523Z",
      "duration": 3.68,
      "composite_image": "composite_2023-11-24T17:44:59.523Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T17:44:59.523Z.png",
        "orientation_3d_2023-11-24T17:44:59.523Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T17:44:59.523Z/window_001.png",
          "color": "#6c6e68",
          "accel_mag_mean": 8676.489246632129,
          "gyro_mag_mean": 24104.53704866541,
          "cluster_id": 5
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T17:44:59.523Z/window_002.png",
          "color": "#696761",
          "accel_mag_mean": 8269.964274951846,
          "gyro_mag_mean": 24387.513667532985,
          "cluster_id": 8
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T17:44:59.523Z/window_003.png",
          "color": "#71716c",
          "accel_mag_mean": 8925.77766336191,
          "gyro_mag_mean": 23952.284264831673,
          "cluster_id": 9
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:05:54.664Z.json",
      "timestamp": "2023-11-24T22:05:54.664Z",
      "duration": 3.66,
      "composite_image": "composite_2023-11-24T22:05:54.664Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:05:54.664Z.png",
        "orientation_3d_2023-11-24T22:05:54.664Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:05:54.664Z/window_001.png",
          "color": "#656d65",
          "accel_mag_mean": 8562.31383678232,
          "gyro_mag_mean": 24385.053190244398,
          "cluster_id": 9
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:05:54.664Z/window_002.png",
          "color": "#666c66",
          "accel_mag_mean": 8494.570890244036,
          "gyro_mag_mean": 24277.142655203763,
          "cluster_id": 3
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:05:54.664Z/window_003.png",
          "color": "#666e66",
          "accel_mag_mean": 8646.372810541932,
          "gyro_mag_mean": 25084.441759400383,
          "cluster_id": 9
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:18:26.063Z.json",
      "timestamp": "2023-11-24T22:18:26.063Z",
      "duration": 0.66,
      "composite_image": "composite_2023-11-24T22:18:26.063Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:18:26.063Z.png",
        "orientation_3d_2023-11-24T22:18:26.063Z.png"
      ],
      "windows": [],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:19:05.698Z.json",
      "timestamp": "2023-11-24T22:19:05.698Z",
      "duration": 3.7,
      "composite_image": "composite_2023-11-24T22:19:05.698Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:19:05.698Z.png",
        "orientation_3d_2023-11-24T22:19:05.698Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:19:05.698Z/window_001.png",
          "color": "#686760",
          "accel_mag_mean": 8168.991955540093,
          "gyro_mag_mean": 25052.028306081098,
          "cluster_id": 8
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:19:05.698Z/window_002.png",
          "color": "#686861",
          "accel_mag_mean": 8197.03825283563,
          "gyro_mag_mean": 24984.31043864689,
          "cluster_id": 5
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:19:05.698Z/window_003.png",
          "color": "#696861",
          "accel_mag_mean": 8254.970282524644,
          "gyro_mag_mean": 25461.5246838465,
          "cluster_id": 8
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:19:47.909Z.json",
      "timestamp": "2023-11-24T22:19:47.909Z",
      "duration": 3.64,
      "composite_image": "composite_2023-11-24T22:19:47.909Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:19:47.909Z.png",
        "orientation_3d_2023-11-24T22:19:47.909Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:19:47.909Z/window_001.png",
          "color": "#686763",
          "accel_mag_mean": 8206.059909376863,
          "gyro_mag_mean": 24670.09295452548,
          "cluster_id": 5
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:19:47.909Z/window_002.png",
          "color": "#666063",
          "accel_mag_mean": 8072.887434422974,
          "gyro_mag_mean": 24918.896812167615,
          "cluster_id": 0
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:19:47.909Z/window_003.png",
          "color": "#676164",
          "accel_mag_mean": 8124.922272300956,
          "gyro_mag_mean": 25326.220835432447,
          "cluster_id": 8
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:20:26.429Z.json",
      "timestamp": "2023-11-24T22:20:26.429Z",
      "duration": 3.78,
      "composite_image": "composite_2023-11-24T22:20:26.429Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:20:26.429Z.png",
        "orientation_3d_2023-11-24T22:20:26.429Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:20:26.429Z/window_001.png",
          "color": "#a3989f",
          "accel_mag_mean": 12861.122230679031,
          "gyro_mag_mean": 24910.124935448795,
          "cluster_id": 6
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:20:26.429Z/window_002.png",
          "color": "#867e85",
          "accel_mag_mean": 10581.618419641918,
          "gyro_mag_mean": 25192.84952954803,
          "cluster_id": 4
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:20:26.429Z/window_003.png",
          "color": "#9a9099",
          "accel_mag_mean": 12152.872277210341,
          "gyro_mag_mean": 24957.53561500772,
          "cluster_id": 2
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:21:08.191Z.json",
      "timestamp": "2023-11-24T22:21:08.191Z",
      "duration": 3.66,
      "composite_image": "composite_2023-11-24T22:21:08.191Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:21:08.191Z.png",
        "orientation_3d_2023-11-24T22:21:08.191Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:21:08.191Z/window_001.png",
          "color": "#70696a",
          "accel_mag_mean": 8808.603727063055,
          "gyro_mag_mean": 25138.40384439813,
          "cluster_id": 2
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:21:08.191Z/window_002.png",
          "color": "#666168",
          "accel_mag_mean": 8158.865008327213,
          "gyro_mag_mean": 25001.985675824457,
          "cluster_id": 0
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:21:08.191Z/window_003.png",
          "color": "#6a6469",
          "accel_mag_mean": 8348.208275697765,
          "gyro_mag_mean": 24859.859068364043,
          "cluster_id": 4
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:25:19.216Z.json",
      "timestamp": "2023-11-24T22:25:19.216Z",
      "duration": 3.66,
      "composite_image": "composite_2023-11-24T22:25:19.216Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:25:19.216Z.png",
        "orientation_3d_2023-11-24T22:25:19.216Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:25:19.216Z/window_001.png",
          "color": "#787078",
          "accel_mag_mean": 9419.9775513661,
          "gyro_mag_mean": 24864.103358799493,
          "cluster_id": 4
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:25:19.216Z/window_002.png",
          "color": "#ada2ab",
          "accel_mag_mean": 13609.699725655673,
          "gyro_mag_mean": 24965.582151297567,
          "cluster_id": 6
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:25:19.216Z/window_003.png",
          "color": "#746c6f",
          "accel_mag_mean": 9160.62324082688,
          "gyro_mag_mean": 25322.124632588155,
          "cluster_id": 4
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:25:51.821Z.json",
      "timestamp": "2023-11-24T22:25:51.821Z",
      "duration": 3.72,
      "composite_image": "composite_2023-11-24T22:25:51.821Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:25:51.821Z.png",
        "orientation_3d_2023-11-24T22:25:51.821Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:25:51.821Z/window_001.png",
          "color": "#686863",
          "accel_mag_mean": 8202.104565832153,
          "gyro_mag_mean": 24810.02095006045,
          "cluster_id": 5
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:25:51.821Z/window_002.png",
          "color": "#65655f",
          "accel_mag_mean": 7986.747602226254,
          "gyro_mag_mean": 25623.157023928597,
          "cluster_id": 8
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:25:51.821Z/window_003.png",
          "color": "#6d6668",
          "accel_mag_mean": 8588.485781661426,
          "gyro_mag_mean": 25153.344842197635,
          "cluster_id": 2
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:27:35.295Z.json",
      "timestamp": "2023-11-24T22:27:35.295Z",
      "duration": 3.62,
      "composite_image": "composite_2023-11-24T22:27:35.295Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:27:35.295Z.png",
        "orientation_3d_2023-11-24T22:27:35.295Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:27:35.295Z/window_001.png",
          "color": "#63636a",
          "accel_mag_mean": 8316.86480842023,
          "gyro_mag_mean": 24869.26431385586,
          "cluster_id": 5
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:27:35.295Z/window_002.png",
          "color": "#68686d",
          "accel_mag_mean": 8618.626150241515,
          "gyro_mag_mean": 25097.12827622967,
          "cluster_id": 5
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:27:35.295Z/window_003.png",
          "color": "#626369",
          "accel_mag_mean": 8246.036158714483,
          "gyro_mag_mean": 25288.11582016711,
          "cluster_id": 5
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2023-11-24T22:33:46.427Z.json",
      "timestamp": "2023-11-24T22:33:46.427Z",
      "duration": 3.7,
      "composite_image": "composite_2023-11-24T22:33:46.427Z.png",
      "raw_images": [
        "raw_axes_2023-11-24T22:33:46.427Z.png",
        "orientation_3d_2023-11-24T22:33:46.427Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2023-11-24T22:33:46.427Z/window_001.png",
          "color": "#64656b",
          "accel_mag_mean": 8455.386672923265,
          "gyro_mag_mean": 24986.177948986962,
          "cluster_id": 5
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2023-11-24T22:33:46.427Z/window_002.png",
          "color": "#63646a",
          "accel_mag_mean": 8341.074128294482,
          "gyro_mag_mean": 25224.30888265323,
          "cluster_id": 5
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2023-11-24T22:33:46.427Z/window_003.png",
          "color": "#626268",
          "accel_mag_mean": 8208.772934370081,
          "gyro_mag_mean": 25137.37612429634,
          "cluster_id": 8
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2024-01-05T16:40:02.821Z.json",
      "timestamp": "2024-01-05T16:40:02.821Z",
      "duration": 2.24,
      "composite_image": "composite_2024-01-05T16:40:02.821Z.png",
      "raw_images": [
        "raw_axes_2024-01-05T16:40:02.821Z.png",
        "orientation_3d_2024-01-05T16:40:02.821Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2024-01-05T16:40:02.821Z/window_001.png",
          "color": "#696765",
          "accel_mag_mean": 8294.755850165697,
          "gyro_mag_mean": 22714.80001682548,
          "cluster_id": 7
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2024-01-05T16:40:02.821Z/window_002.png",
          "color": "#686366",
          "accel_mag_mean": 8183.928441507165,
          "gyro_mag_mean": 22786.569029937637,
          "cluster_id": 7
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    },
    {
      "filename": "2024-01-05T16:41:20.581Z.json",
      "timestamp": "2024-01-05T16:41:20.581Z",
      "duration": 3.72,
      "composite_image": "composite_2024-01-05T16:41:20.581Z.png",
      "raw_images": [
        "raw_axes_2024-01-05T16:41:20.581Z.png",
        "orientation_3d_2024-01-05T16:41:20.581Z.png"
      ],
      "windows": [
        {
          "window_num": 1,
          "time_start": 0.0,
          "time_end": 1.0,
          "filename": "window_001.png",
          "filepath": "windows_2024-01-05T16:41:20.581Z/window_001.png",
          "color": "#646a66",
          "accel_mag_mean": 8324.644525404472,
          "gyro_mag_mean": 23625.672191865488,
          "cluster_id": 7
        },
        {
          "window_num": 2,
          "time_start": 1.0,
          "time_end": 2.0,
          "filename": "window_002.png",
          "filepath": "windows_2024-01-05T16:41:20.581Z/window_002.png",
          "color": "#717773",
          "accel_mag_mean": 9349.181928798114,
          "gyro_mag_mean": 23907.918322820904,
          "cluster_id": 7
        },
        {
          "window_num": 3,
          "time_start": 2.0,
          "time_end": 3.0,
          "filename": "window_003.png",
          "filepath": "windows_2024-01-05T16:41:20.581Z/window_003.png",
          "color": "#636866",
          "accel_mag_mean": 8234.509430469838,
          "gyro_mag_mean": 23699.134552791278,
          "cluster_id": 7
        }
      ],
      "labeled": false,
      "split": null,
      "labels": []
    }
  ],
  "clustering": {
    "enabled": true,
    "n_clusters": 10,
    "metrics": {
      "silhouette_score": 0.3882037401199341,
      "davies_bouldin_score": 0.987405445193253
    },
    "clusters": [
      {
        "id": 0,
        "size": 6,
        "percentage": 4.511278195488721,
        "sessions": [
          "2023-11-24T22:19:47.909Z.json",
          "2023-11-24T22:21:08.191Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 1,
        "size": 13,
        "percentage": 9.774436090225564,
        "sessions": [
          "2023-11-24T17:24:38.129Z.json",
          "2023-11-24T17:14:18.479Z.json",
          "2023-11-24T17:27:20.364Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 2,
        "size": 8,
        "percentage": 6.015037593984962,
        "sessions": [
          "2023-11-24T22:25:51.821Z.json",
          "2023-11-24T22:21:08.191Z.json",
          "2023-11-24T22:20:26.429Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 3,
        "size": 36,
        "percentage": 27.06766917293233,
        "sessions": [
          "2023-11-24T17:28:29.121Z.json",
          "2023-11-24T17:34:43.947Z.json",
          "2023-11-24T17:36:05.668Z.json",
          "2023-11-24T17:36:42.659Z.json",
          "2023-11-24T22:05:54.664Z.json",
          "2023-11-24T17:27:53.662Z.json",
          "2023-11-24T17:35:21.240Z.json",
          "2023-11-24T17:37:23.790Z.json",
          "2023-11-24T17:29:02.123Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 4,
        "size": 5,
        "percentage": 3.7593984962406015,
        "sessions": [
          "2023-11-24T22:25:19.216Z.json",
          "2023-11-24T22:21:08.191Z.json",
          "2023-11-24T22:20:26.429Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 5,
        "size": 14,
        "percentage": 10.526315789473683,
        "sessions": [
          "2023-11-24T22:33:46.427Z.json",
          "2023-11-24T22:19:47.909Z.json",
          "2023-11-24T22:27:35.295Z.json",
          "2023-11-24T22:25:51.821Z.json",
          "2023-11-24T22:19:05.698Z.json",
          "2023-11-24T17:44:59.523Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 6,
        "size": 5,
        "percentage": 3.7593984962406015,
        "sessions": [
          "2023-11-24T22:25:19.216Z.json",
          "2023-11-24T22:20:26.429Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 7,
        "size": 9,
        "percentage": 6.7669172932330826,
        "sessions": [
          "2024-01-05T16:41:20.581Z.json",
          "2024-01-05T16:40:02.821Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 8,
        "size": 14,
        "percentage": 10.526315789473683,
        "sessions": [
          "2023-11-24T22:33:46.427Z.json",
          "2023-11-24T22:19:47.909Z.json",
          "2023-11-24T22:25:51.821Z.json",
          "2023-11-24T22:21:08.191Z.json",
          "2023-11-24T22:19:05.698Z.json",
          "2023-11-24T17:44:59.523Z.json"
        ],
        "gesture_name": null
      },
      {
        "id": 9,
        "size": 23,
        "percentage": 17.293233082706767,
        "sessions": [
          "2023-11-24T17:28:29.121Z.json",
          "2023-11-24T17:36:05.668Z.json",
          "2023-11-24T22:05:54.664Z.json",
          "2023-11-24T17:27:20.364Z.json",
          "2023-11-24T17:35:21.240Z.json",
          "2023-11-24T17:37:23.790Z.json",
          "2023-11-24T17:44:59.523Z.json",
          "2023-11-24T17:29:02.123Z.json"
        ],
        "gesture_name": null
      }
    ],
    "points": []
  },
  "gestures": [
    "rest",
    "fist",
    "open_palm",
    "index_up",
    "peace",
    "thumbs_up",
    "ok_sign",
    "pinch",
    "grab",
    "wave"
  ],
  "config": {
    "window_size": 50,
    "stride": 25,
    "sample_rate": 50
  }
};
        
        // Cluster colors
        const clusterColors = ["#e41a1c", "#377eb8", "#4daf4a", "#984ea3", "#ff7f00", "#ffff33", "#a65628", "#f781bf", "#999999", "#66c2a5"];
        
        // State
        let selectedCluster = null;
        let clusterGestureAssignments = {};
        let filteredSessions = [...explorerData.sessions];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initTabs();
            initClusterCanvas();
            initClusterLegend();
            initClusterStats();
            initClusterDetails();
            initFilters();
            renderSessions();
            initLabelingPanel();
        });
        
        // Tab switching
        function initTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
                });
            });
        }
        
        // Canvas cluster visualization
        function initClusterCanvas() {
            const canvas = document.getElementById('clusterCanvas');
            const ctx = canvas.getContext('2d');
            const points = explorerData.clustering.points || [];
            
            if (points.length === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '14px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('No clustering data available', canvas.width / 2, canvas.height / 2);
                return;
            }
            
            // Set canvas size
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * window.devicePixelRatio;
            canvas.height = rect.height * window.devicePixelRatio;
            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
            
            // Find bounds
            let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
            points.forEach(p => {
                minX = Math.min(minX, p.x);
                maxX = Math.max(maxX, p.x);
                minY = Math.min(minY, p.y);
                maxY = Math.max(maxY, p.y);
            });
            
            const padding = 20;
            const width = rect.width - padding * 2;
            const height = rect.height - padding * 2;
            
            function toCanvas(x, y) {
                return {
                    x: padding + ((x - minX) / (maxX - minX)) * width,
                    y: padding + ((y - minY) / (maxY - minY)) * height
                };
            }
            
            function draw() {
                ctx.clearRect(0, 0, rect.width, rect.height);
                
                // Draw points
                points.forEach(p => {
                    const pos = toCanvas(p.x, p.y);
                    const color = clusterColors[p.cluster % clusterColors.length];
                    const isSelected = selectedCluster === null || selectedCluster === p.cluster;
                    
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, isSelected ? 5 : 3, 0, Math.PI * 2);
                    ctx.fillStyle = isSelected ? color : color + '40';
                    ctx.fill();
                });
            }
            
            draw();
            
            // Click handler
            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Find closest point
                let closest = null;
                let minDist = Infinity;
                
                points.forEach(p => {
                    const pos = toCanvas(p.x, p.y);
                    const dist = Math.sqrt((pos.x - x) ** 2 + (pos.y - y) ** 2);
                    if (dist < minDist && dist < 15) {
                        minDist = dist;
                        closest = p;
                    }
                });
                
                if (closest) {
                    selectCluster(closest.cluster);
                } else {
                    selectCluster(null);
                }
                draw();
            });
            
            window.redrawCanvas = draw;
        }
        
        // Cluster legend
        function initClusterLegend() {
            const legend = document.getElementById('clusterLegend');
            const clusters = explorerData.clustering.clusters || [];
            
            legend.innerHTML = clusters.map(c => `
                <div class="cluster-item" data-cluster="${c.id}" onclick="selectCluster(${c.id})">
                    <div class="cluster-dot" style="background: ${clusterColors[c.id % clusterColors.length]}"></div>
                    <span>Cluster ${c.id}</span>
                    <span class="cluster-count">${c.size}</span>
                </div>
            `).join('');
            
            // Populate filter dropdown
            const filter = document.getElementById('clusterFilter');
            clusters.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c.id;
                opt.textContent = `Cluster ${c.id} (${c.size})`;
                filter.appendChild(opt);
            });
        }
        
        function selectCluster(clusterId) {
            selectedCluster = clusterId === selectedCluster ? null : clusterId;
            
            // Update legend
            document.querySelectorAll('.cluster-item').forEach(item => {
                item.classList.toggle('selected', parseInt(item.dataset.cluster) === selectedCluster);
            });
            
            // Update filter dropdown
            document.getElementById('clusterFilter').value = selectedCluster !== null ? selectedCluster : 'all';
            
            // Filter sessions
            applyFilters();
            
            // Redraw canvas
            if (window.redrawCanvas) window.redrawCanvas();
        }
        
        // Filters
        function initFilters() {
            document.getElementById('searchBox').addEventListener('input', applyFilters);
            document.getElementById('clusterFilter').addEventListener('change', (e) => {
                selectedCluster = e.target.value === 'all' ? null : parseInt(e.target.value);
                applyFilters();
                if (window.redrawCanvas) window.redrawCanvas();
            });
            document.getElementById('sortSelect').addEventListener('change', applyFilters);
        }
        
        function applyFilters() {
            const search = document.getElementById('searchBox').value.toLowerCase();
            const sort = document.getElementById('sortSelect').value;
            
            filteredSessions = explorerData.sessions.filter(s => {
                // Search filter
                if (search && !s.filename.toLowerCase().includes(search)) return false;
                
                // Cluster filter
                if (selectedCluster !== null) {
                    const hasCluster = s.windows.some(w => w.cluster_id === selectedCluster);
                    if (!hasCluster) return false;
                }
                
                return true;
            });
            
            // Sort
            filteredSessions.sort((a, b) => {
                switch(sort) {
                    case 'timestamp-desc': return b.timestamp.localeCompare(a.timestamp);
                    case 'timestamp-asc': return a.timestamp.localeCompare(b.timestamp);
                    case 'duration-desc': return b.duration - a.duration;
                    case 'windows-desc': return b.windows.length - a.windows.length;
                    default: return 0;
                }
            });
            
            renderSessions();
        }
        
        // Render sessions
        function renderSessions() {
            const grid = document.getElementById('sessionGrid');
            
            if (filteredSessions.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 40px; opacity: 0.6;">No sessions match your filters</div>';
                return;
            }
            
            grid.innerHTML = filteredSessions.map((s, idx) => `
                <div class="session-card" id="session-${idx}">
                    <div class="session-header" onclick="toggleSession(${idx})">
                        <div>
                            <div class="session-title">${s.filename}</div>
                            <div class="session-info">${formatTimestamp(s.timestamp)} | ${s.duration.toFixed(1)}s | ${s.windows.length} windows</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div class="session-badges">
                                <span class="badge ${s.labeled ? 'labeled' : 'unlabeled'}">${s.labeled ? 'Labeled' : 'Unlabeled'}</span>
                            </div>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                    </div>
                    <div class="session-content">
                        ${s.composite_image ? `
                            <h3 class="section-title">üìä Composite View</h3>
                            <img src="${s.composite_image}" class="composite-image" onclick="openModal(this.src)">
                        ` : ''}
                        
                        <h3 class="section-title">üîç Windows (${s.windows.length})</h3>
                        <div class="windows-grid">
                            ${s.windows.map(w => `
                                <div class="window-card ${selectedCluster !== null && w.cluster_id === selectedCluster ? 'highlighted' : ''}">
                                    <div class="window-cluster-bar" style="background: ${w.cluster_id >= 0 ? clusterColors[w.cluster_id % clusterColors.length] : '#444'}"></div>
                                    ${w.filepath ? `<img src="${w.filepath}" class="window-preview" onclick="openModal(this.src)">` : '<div class="window-preview" style="background: #333; display: flex; align-items: center; justify-content: center; color: #666;">No image</div>'}
                                    <div class="window-info">
                                        <div class="window-title">Window ${w.window_num || '?'}</div>
                                        <div class="window-time">${(w.time_start || 0).toFixed(2)}s - ${(w.time_end || 0).toFixed(2)}s</div>
                                        <div class="window-cluster" style="color: ${w.cluster_id >= 0 ? clusterColors[w.cluster_id % clusterColors.length] : '#666'}">
                                            ${w.cluster_id >= 0 ? `Cluster ${w.cluster_id}` : 'No cluster'}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        ${s.raw_images && s.raw_images.length > 0 ? `
                            <h3 class="section-title">üìê Raw Views</h3>
                            <div class="raw-images">
                                ${s.raw_images.map(img => `<img src="${img}" class="raw-image" onclick="openModal(this.src)">`).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }
        
        function toggleSession(idx) {
            document.getElementById(`session-${idx}`).classList.toggle('expanded');
            updateSectionVisibility(idx);
        }
        
        // Expand/Collapse all
        function expandAll() {
            document.querySelectorAll('.session-card').forEach(card => {
                card.classList.add('expanded');
            });
            updateAllSectionVisibility();
        }
        
        function collapseAll() {
            document.querySelectorAll('.session-card').forEach(card => {
                card.classList.remove('expanded');
            });
        }
        
        // View filtering
        function updateSectionVisibility(idx) {
            const card = document.getElementById(`session-${idx}`);
            if (!card) return;
            
            const showComposite = document.getElementById('showComposite').checked;
            const showWindows = document.getElementById('showWindows').checked;
            const showRaw = document.getElementById('showRaw').checked;
            
            const sections = card.querySelectorAll('.section-title');
            sections.forEach(section => {
                const text = section.textContent;
                const nextEl = section.nextElementSibling;
                
                if (text.includes('Composite')) {
                    section.classList.toggle('section-hidden', !showComposite);
                    if (nextEl) nextEl.classList.toggle('section-hidden', !showComposite);
                } else if (text.includes('Windows')) {
                    section.classList.toggle('section-hidden', !showWindows);
                    if (nextEl) nextEl.classList.toggle('section-hidden', !showWindows);
                } else if (text.includes('Raw')) {
                    section.classList.toggle('section-hidden', !showRaw);
                    if (nextEl) nextEl.classList.toggle('section-hidden', !showRaw);
                }
            });
        }
        
        function updateAllSectionVisibility() {
            document.querySelectorAll('.session-card').forEach((card, idx) => {
                updateSectionVisibility(idx);
            });
        }
        
        // Initialize show checkboxes
        document.getElementById('showComposite').addEventListener('change', updateAllSectionVisibility);
        document.getElementById('showWindows').addEventListener('change', updateAllSectionVisibility);
        document.getElementById('showRaw').addEventListener('change', updateAllSectionVisibility);
        
        function formatTimestamp(ts) {
            try { return new Date(ts).toLocaleString(); }
            catch { return ts; }
        }
        
        // Modal
        function openModal(src) {
            document.getElementById('imageModal').classList.add('active');
            document.getElementById('modalImage').src = src;
        }
        
        function closeModal() {
            document.getElementById('imageModal').classList.remove('active');
        }
        
        document.getElementById('imageModal').addEventListener('click', (e) => {
            if (e.target.id === 'imageModal') closeModal();
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });
        
        // Cluster stats grid (for Clusters tab)
        function initClusterStats() {
            const grid = document.getElementById('clusterStatsGrid');
            const clusters = explorerData.clustering.clusters || [];
            const totalWindows = clusters.reduce((sum, c) => sum + c.size, 0);
            
            if (clusters.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.6;">No clustering data available</div>';
                return;
            }
            
            grid.innerHTML = clusters.map(c => {
                const color = clusterColors[c.id % clusterColors.length];
                const pct = totalWindows > 0 ? (c.size / totalWindows * 100) : 0;
                return `
                    <div class="cluster-stat-card" style="border-left-color: ${color}" onclick="goToCluster(${c.id})">
                        <div class="cluster-stat-header">
                            <div class="cluster-dot" style="background: ${color}; width: 16px; height: 16px;"></div>
                            <span class="cluster-stat-title">Cluster ${c.id}</span>
                            <span class="cluster-stat-size">${c.size} windows</span>
                        </div>
                        <div class="cluster-stat-bar">
                            <div class="cluster-stat-bar-fill" style="width: ${pct}%; background: ${color}"></div>
                        </div>
                        <div class="cluster-stat-sessions">
                            ${c.sessions.length} session${c.sessions.length !== 1 ? 's' : ''} ‚Ä¢ ${pct.toFixed(1)}% of data
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Cluster details (for Clusters tab)
        function initClusterDetails() {
            const container = document.getElementById('clusterDetails');
            const clusters = explorerData.clustering.clusters || [];
            const points = explorerData.clustering.points || [];
            
            if (clusters.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px; opacity: 0.6;">No clustering data available</div>';
                return;
            }
            
            container.innerHTML = clusters.map(c => {
                const color = clusterColors[c.id % clusterColors.length];
                
                // Get sample windows for this cluster
                const clusterPoints = points.filter(p => p.cluster === c.id).slice(0, 6);
                const sampleWindows = [];
                
                clusterPoints.forEach(p => {
                    const session = explorerData.sessions.find(s => s.filename === p.session);
                    if (session) {
                        const window = session.windows.find(w => 
                            Math.abs((w.time_start || 0) * 50 - p.start_sample) < 5
                        );
                        if (window && window.filepath) {
                            sampleWindows.push(window.filepath);
                        }
                    }
                });
                
                return `
                    <div class="cluster-detail-card" style="border-left-color: ${color}">
                        <div class="cluster-detail-header">
                            <div class="cluster-dot" style="background: ${color}; width: 20px; height: 20px;"></div>
                            <span class="cluster-detail-title">Cluster ${c.id}</span>
                            <button class="action-btn" onclick="goToCluster(${c.id})" style="margin-left: auto;">
                                View in Explore ‚Üí
                            </button>
                        </div>
                        
                        <div class="cluster-detail-stats">
                            <div class="cluster-detail-stat">
                                <span class="cluster-detail-stat-value">${c.size}</span>
                                <span class="cluster-detail-stat-label">Windows</span>
                            </div>
                            <div class="cluster-detail-stat">
                                <span class="cluster-detail-stat-value">${c.percentage.toFixed(1)}%</span>
                                <span class="cluster-detail-stat-label">of Total</span>
                            </div>
                            <div class="cluster-detail-stat">
                                <span class="cluster-detail-stat-value">${c.sessions.length}</span>
                                <span class="cluster-detail-stat-label">Sessions</span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <strong style="font-size: 0.9em; opacity: 0.8;">Sessions containing this cluster:</strong>
                            <div class="cluster-sessions-list">
                                ${c.sessions.map(s => `
                                    <span class="cluster-session-tag" onclick="searchSession('${s}')">${s.replace('.json', '').substring(0, 19)}</span>
                                `).join('')}
                            </div>
                        </div>
                        
                        ${sampleWindows.length > 0 ? `
                            <div style="margin-top: 15px;">
                                <strong style="font-size: 0.9em; opacity: 0.8;">Sample windows:</strong>
                                <div class="cluster-windows-preview">
                                    ${sampleWindows.map(w => `
                                        <div class="cluster-window-thumb" onclick="openModal('${w}')">
                                            <img src="${w}" alt="Window preview">
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }
        
        // Navigate to cluster in Explore tab
        function goToCluster(clusterId) {
            // Switch to Explore tab
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector('[data-tab="explore"]').classList.add('active');
            document.getElementById('tab-explore').classList.add('active');
            
            // Select the cluster
            selectCluster(clusterId);
        }
        
        // Search for a session
        function searchSession(filename) {
            // Switch to Explore tab
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelector('[data-tab="explore"]').classList.add('active');
            document.getElementById('tab-explore').classList.add('active');
            
            // Set search box
            document.getElementById('searchBox').value = filename.replace('.json', '');
            applyFilters();
        }
        
        // Labeling panel
        function initLabelingPanel() {
            const panel = document.getElementById('clusterLabeling');
            const clusters = explorerData.clustering.clusters || [];
            const gestures = explorerData.gestures || [];
            
            panel.innerHTML = clusters.map(c => `
                <div style="display: flex; align-items: center; gap: 15px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 8px; margin-bottom: 10px;">
                    <div class="cluster-dot" style="background: ${clusterColors[c.id % clusterColors.length]}; width: 16px; height: 16px;"></div>
                    <span style="min-width: 80px;">Cluster ${c.id}</span>
                    <span style="opacity: 0.6; min-width: 60px;">(${c.size} windows)</span>
                    <select class="gesture-select" data-cluster="${c.id}" style="flex: 1; padding: 8px; background: #0f0f23; border: 2px solid #2a2a4a; border-radius: 6px; color: #eee;">
                        <option value="">-- Select Gesture --</option>
                        ${gestures.map(g => `<option value="${g}">${g}</option>`).join('')}
                    </select>
                </div>
            `).join('');
            
            // Track changes
            panel.querySelectorAll('.gesture-select').forEach(select => {
                select.addEventListener('change', (e) => {
                    const clusterId = parseInt(e.target.dataset.cluster);
                    clusterGestureAssignments[clusterId] = e.target.value || null;
                });
            });
            
            // Export button
            document.getElementById('exportBtn').addEventListener('click', exportLabels);
        }
        
        function exportLabels() {
            const assignments = clusterGestureAssignments;
            const hasAssignments = Object.values(assignments).some(v => v);
            
            if (!hasAssignments) {
                alert('Please assign at least one gesture to a cluster before exporting.');
                return;
            }
            
            // Build label templates for each session
            const templates = {};
            
            explorerData.sessions.forEach(session => {
                const labels = [];
                
                session.windows.forEach(w => {
                    const gesture = assignments[w.cluster_id];
                    if (gesture) {
                        labels.push({
                            start_sample: Math.round((w.time_start || 0) * 50),
                            end_sample: Math.round((w.time_end || 1) * 50),
                            gesture: gesture,
                            confidence: 'medium',
                            cluster_id: w.cluster_id
                        });
                    }
                });
                
                if (labels.length > 0) {
                    templates[session.filename] = {
                        timestamp: session.timestamp,
                        labels: labels
                    };
                }
            });
            
            // Download as JSON
            const blob = new Blob([JSON.stringify(templates, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'label_templates.json';
            a.click();
            URL.revokeObjectURL(url);
            
            alert(`Exported labels for ${Object.keys(templates).length} sessions.\n\nTo use:\n1. Split the JSON into individual .meta.json files\n2. Move to your data directory`);
        }
    </script>
</body>
</html>